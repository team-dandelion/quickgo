app:
  name: "gateway"
  version: "1.0.0"
  env: "local"

logger:
  enabled: true
  level: "debug"
  output: "console"
  service: "gateway"
  version: "1.0.0"

grpcClient:
  timeout: "10s"
  insecure: true
  keepAliveTime: "10s"
  keepAliveTimeout: "3s"
  loadBalancing: "round_robin"
  etcd:
    endpoints:
      - "127.0.0.1:2379"
    dialTimeout: "5s"
    prefix: "/grpc/services"

httpServer:
  enabled: true
  address: "0.0.0.0"
  port: 8086
  enableCORS: true
  enableRecovery: true
  enableLogging: true
  enableTrace: true
  cors:
    allowOrigins: "*"
    allowMethods: "GET,POST,PUT,DELETE,OPTIONS"
    allowHeaders: "*"
    allowCredentials: false

# Redis 配置（用于网关缓存）
redis:
  databases:
    - name: "gateway-cache"
      host: "127.0.0.1"
      port: 6379
      password: ""
      db: 1
      poolSize: 10
      minIdleConns: 5
      maxConnAge: "1h"
      poolTimeout: "4s"
      idleTimeout: "5m"
      dialTimeout: "5s"
      readTimeout: "3s"
      writeTimeout: "3s"

# MongoDB 配置（用于日志存储，可选）
mongodb:
  databases:
    - name: "log-mongo"
      host: "127.0.0.1"
      port: 27017
      username: ""
      password: ""
      database: "gateway_logs"
      maxPoolSize: 50
      minPoolSize: 5

# 链路追踪配置（Jaeger）
tracing:
  enabled: true
  serviceName: "gateway"
  serviceVersion: "1.0.0"
  environment: "local"
  samplingRate: 1.0  # 采样率：1.0 表示采样所有请求
  # 方式1：使用 OTLP（推荐，Jaeger 支持 OTLP）
  otlp:
    enabled: true
    endpoint: "localhost:4318"  # HTTP 端点（Jaeger 默认 OTLP HTTP 端口），格式：host:port
    useGRPC: false
    insecure: true
